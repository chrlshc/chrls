"""
📧 EMAIL TEMPLATES ENGINE - Hunter Agency V2.2
Templates dynamiques pour l'automation email
"""

from typing import Dict, Any, Optional
from datetime import datetime

class EmailTemplateEngine:
    """
    Moteur de templates email avec personnalisation avancée
    """
    
    def __init__(self):
        self.templates = {
            # Cold Outreach Sequences
            "cold_outreach_step1": {
                "subject": "Quick question about {industry}, {first_name}",
                "template": self._cold_outreach_step1
            },
            "cold_outreach_step2": {
                "subject": "Following up on {company} growth opportunities",
                "template": self._cold_outreach_step2
            },
            "cold_outreach_step3": {
                "subject": "Last chance: {value_proposition} for {company}",
                "template": self._cold_outreach_step3
            },
            
            # Warm Sequences
            "warm_nurture_step1": {
                "subject": "Welcome to Hunter Agency, {first_name}! 🎉",
                "template": self._warm_nurture_step1
            },
            "warm_nurture_step2": {
                "subject": "Your {industry} growth roadmap is ready",
                "template": self._warm_nurture_step2
            },
            
            # Hot Lead Sequences
            "hot_lead_immediate": {
                "subject": "URGENT: {first_name}, let's schedule your strategy call",
                "template": self._hot_lead_immediate
            },
            
            # Follow-up Sequences
            "follow_up_gentle": {
                "subject": "Checking in on {company}'s growth goals",
                "template": self._follow_up_gentle
            },
            "follow_up_value": {
                "subject": "Free resource: {industry} growth strategies",
                "template": self._follow_up_value
            }
        }
    
    def get_template(self, template_name: str, data: Dict[str, Any]) -> Dict[str, str]:
        """
        Récupérer et personnaliser un template
        """
        if template_name not in self.templates:
            template_name = "cold_outreach_step1"  # Default fallback
        
        template_config = self.templates[template_name]
        
        # Préparer les données avec valeurs par défaut
        template_data = self._prepare_template_data(data)
        
        # Générer le sujet et le contenu
        subject = template_config["subject"].format(**template_data)
        html_content = template_config["template"](template_data)
        
        return {
            "subject": subject,
            "html_content": html_content,
            "template_name": template_name
        }
    
    def _prepare_template_data(self, data: Dict[str, Any]) -> Dict[str, Any]:
        """
        Préparer et enrichir les données pour le template
        """
        # Valeurs par défaut
        template_data = {
            "first_name": data.get("first_name", "there"),
            "last_name": data.get("last_name", ""),
            "company": data.get("company", "your company"),
            "industry": data.get("industry", "business"),
            "email": data.get("email", ""),
            "current_date": datetime.now().strftime("%B %d, %Y"),
            "current_year": datetime.now().year
        }
        
        # Logique business personnalisée
        template_data["value_proposition"] = self._get_value_proposition(template_data["industry"])
        template_data["industry_specific_benefits"] = self._get_industry_benefits(template_data["industry"])
        template_data["personalized_cta"] = self._get_personalized_cta(template_data["industry"])
        
        return template_data
    
    def _get_value_proposition(self, industry: str) -> str:
        """Propositions de valeur spécifiques par industrie"""
        value_props = {
            "saas": "Scale your SaaS to 7-figures with proven growth systems",
            "ecommerce": "Double your e-commerce revenue with automated funnels",
            "agency": "Get 50+ qualified leads monthly for your agency",
            "consulting": "Build a 6-figure consulting practice in 90 days",
            "fintech": "Accelerate fintech growth with compliant marketing",
            "real_estate": "Generate qualified property leads automatically",
            "healthcare": "Attract more patients with HIPAA-compliant marketing",
            "default": "Scale your business with proven growth systems"
        }
        return value_props.get(industry.lower(), value_props["default"])\n    \n    def _get_industry_benefits(self, industry: str) -> str:\n        \"\"\"Bénéfices spécifiques par industrie\"\"\"\n        benefits = {\n            "saas": "• Reduce churn by 40%\\n• Increase MRR by 200%\\n• Automate customer acquisition",\n            "ecommerce": "• Boost conversion rates by 150%\\n• Reduce cart abandonment\\n• Increase average order value",\n            "agency": "• Predictable lead flow\\n• Higher-value clients\\n• Scalable processes",\n            "consulting": "• Premium positioning\\n• Thought leadership\\n• Automated client acquisition",\n            "default": "• Increase revenue by 200%\\n• Reduce acquisition costs\\n• Scale systematically"\n        }\n        return benefits.get(industry.lower(), benefits["default"])\n    \n    def _get_personalized_cta(self, industry: str) -> str:\n        \"\"\"Call-to-action personnalisé par industrie\"\"\"\n        ctas = {\n            "saas": "Book Your SaaS Scale Strategy Session",\n            "ecommerce": "Get Your E-commerce Growth Audit",\n            "agency": "Claim Your Agency Growth Blueprint",\n            "consulting": "Schedule Your Practice Building Call",\n            "default": "Book Your Growth Strategy Session"\n        }\n        return ctas.get(industry.lower(), ctas["default"])\n    \n    def _cold_outreach_step1(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour le premier contact froid\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 700;\">🔥 Hunter Agency</h1>\n                <p style=\"color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 16px;\">Growth Automation Experts</p>\n            </div>\n            \n            <div style=\"background: white; padding: 40px 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 18px; color: #2c3e50; margin: 0 0 20px 0;\">Hi <strong>{data['first_name']}</strong> 👋</p>\n                \n                <p style=\"font-size: 16px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    I noticed <strong>{data['company']}</strong> is in the {data['industry']} space and thought you might be interested in how we're helping similar companies:\n                </p>\n                \n                <div style=\"background: #f8f9fa; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #667eea;\">\n                    <h3 style=\"color: #2c3e50; margin: 0 0 15px 0; font-size: 18px;\">{data['value_proposition']}</h3>\n                    <div style=\"color: #34495e; font-size: 15px; line-height: 1.8;\">\n                        {data['industry_specific_benefits']}\n                    </div>\n                </div>\n                \n                <p style=\"font-size: 16px; color: #34495e; line-height: 1.6; margin: 20px 0;\">\n                    <strong>Quick question:</strong> What's your biggest challenge with {data['industry']} lead generation right now?\n                </p>\n                \n                <div style=\"text-align: center; margin: 30px 0;\">\n                    <a href=\"https://calendly.com/hunter-agency\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                        color: white;\n                        padding: 16px 32px;\n                        text-decoration: none;\n                        border-radius: 8px;\n                        font-weight: 600;\n                        font-size: 16px;\n                        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\n                        transition: transform 0.2s;\n                    \">{data['personalized_cta']}</a>\n                </div>\n                \n                <p style=\"font-size: 14px; color: #7f8c8d; line-height: 1.6; margin: 30px 0 0 0;\">\n                    Best regards,<br>\n                    <strong>The Hunter Agency Team</strong><br>\n                    <span style=\"color: #95a5a6;\">Growth Automation Specialists</span>\n                </p>\n                \n                <div style=\"border-top: 1px solid #ecf0f1; margin: 30px 0 0 0; padding: 20px 0 0 0; text-align: center;\">\n                    <p style=\"font-size: 12px; color: #95a5a6; margin: 0;\">\n                        📧 {data['email']} | 🌐 hunter-agency.com<br>\n                        This email was sent because you opted in or your profile matches our ideal client criteria.\n                    </p>\n                </div>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n    \n    def _cold_outreach_step2(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour le deuxième contact (follow-up)\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%); padding: 30px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 24px; font-weight: 700;\">🚀 Quick Follow-up</h1>\n            </div>\n            \n            <div style=\"background: white; padding: 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 16px; color: #2c3e50; margin: 0 0 20px 0;\">Hi {data['first_name']},</p>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    I reached out earlier about helping <strong>{data['company']}</strong> with {data['industry']} growth automation.\n                </p>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    Since then, we've helped 3 more {data['industry']} companies:\n                </p>\n                \n                <div style=\"background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #27ae60;\">\n                    <ul style=\"margin: 0; padding-left: 20px; color: #2c3e50;\">\n                        <li style=\"margin: 8px 0;\">Increase qualified leads by 300%</li>\n                        <li style=\"margin: 8px 0;\">Reduce cost per acquisition by 60%</li>\n                        <li style=\"margin: 8px 0;\">Automate 80% of their sales process</li>\n                    </ul>\n                </div>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 20px 0;\">\n                    Would a 15-minute call to discuss {data['company']}'s growth potential be valuable?\n                </p>\n                \n                <div style=\"text-align: center; margin: 25px 0;\">\n                    <a href=\"https://calendly.com/hunter-agency\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);\n                        color: white;\n                        padding: 14px 28px;\n                        text-decoration: none;\n                        border-radius: 6px;\n                        font-weight: 600;\n                        font-size: 15px;\n                    \">📞 Quick Call</a>\n                </div>\n                \n                <p style=\"font-size: 14px; color: #7f8c8d; margin: 25px 0 0 0;\">\n                    Best,<br><strong>Hunter Agency Team</strong>\n                </p>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n    \n    def _cold_outreach_step3(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour le troisième contact (dernière chance)\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #e17055 0%, #d63031 100%); padding: 30px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 22px; font-weight: 700;\">⏰ Last Call, {data['first_name']}</h1>\n            </div>\n            \n            <div style=\"background: white; padding: 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 15px; color: #2c3e50; margin: 0 0 20px 0;\">\n                    I've reached out twice about helping {data['company']} scale through automation.\n                </p>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    This is my final email. If growth automation isn't a priority for {data['company']} right now, no worries at all.\n                </p>\n                \n                <div style=\"background: #fff5f5; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #e17055;\">\n                    <p style=\"margin: 0; color: #2c3e50; font-weight: 600;\">But if you're serious about:</p>\n                    <div style=\"color: #34495e; margin: 10px 0 0 0; line-height: 1.8;\">\n                        {data['industry_specific_benefits']}\n                    </div>\n                </div>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 20px 0;\">\n                    Then let's talk. I have one slot left this week.\n                </p>\n                \n                <div style=\"text-align: center; margin: 25px 0;\">\n                    <a href=\"https://calendly.com/hunter-agency\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #e17055 0%, #d63031 100%);\n                        color: white;\n                        padding: 14px 28px;\n                        text-decoration: none;\n                        border-radius: 6px;\n                        font-weight: 600;\n                        font-size: 15px;\n                    \">🔥 Claim Final Slot</a>\n                </div>\n                \n                <p style=\"font-size: 14px; color: #7f8c8d; margin: 25px 0 0 0;\">\n                    If not, I'll assume you're all set and remove you from my outreach list.\n                </p>\n                \n                <p style=\"font-size: 14px; color: #7f8c8d; margin: 15px 0 0 0;\">\n                    Best of luck with {data['company']},<br><strong>Hunter Agency Team</strong>\n                </p>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n    \n    def _warm_nurture_step1(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour le nurturing warm leads\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #00b894 0%, #00cec9 100%); padding: 40px 30px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 28px; font-weight: 700;\">🎉 Welcome {data['first_name']}!</h1>\n                <p style=\"color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 16px;\">You're now part of the Hunter Agency family</p>\n            </div>\n            \n            <div style=\"background: white; padding: 40px 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 16px; color: #2c3e50; margin: 0 0 20px 0;\">\n                    Thank you for your interest in scaling <strong>{data['company']}</strong> through {data['industry']} automation!\n                </p>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    Here's what happens next:\n                </p>\n                \n                <div style=\"background: #f0f9ff; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #00b894;\">\n                    <ol style=\"margin: 0; padding-left: 20px; color: #2c3e50; line-height: 1.8;\">\n                        <li style=\"margin: 10px 0;\"><strong>Today:</strong> Welcome package with industry insights</li>\n                        <li style=\"margin: 10px 0;\"><strong>Day 2:</strong> Custom growth strategy for {data['company']}</li>\n                        <li style=\"margin: 10px 0;\"><strong>Day 3:</strong> Implementation roadmap and next steps</li>\n                    </ol>\n                </div>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 20px 0;\">\n                    In the meantime, I've prepared a <strong>special {data['industry']} growth guide</strong> just for you.\n                </p>\n                \n                <div style=\"text-align: center; margin: 30px 0;\">\n                    <a href=\"https://hunter-agency.com/guide\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);\n                        color: white;\n                        padding: 16px 32px;\n                        text-decoration: none;\n                        border-radius: 8px;\n                        font-weight: 600;\n                        font-size: 16px;\n                        box-shadow: 0 4px 15px rgba(0, 184, 148, 0.4);\n                    \">📖 Download Your Guide</a>\n                </div>\n                \n                <p style=\"font-size: 14px; color: #7f8c8d; line-height: 1.6; margin: 30px 0 0 0;\">\n                    Excited to help you grow,<br>\n                    <strong>The Hunter Agency Team</strong><br>\n                    <span style=\"color: #95a5a6;\">Your Growth Partners</span>\n                </p>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n    \n    def _warm_nurture_step2(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour le 2ème email de nurturing\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%); padding: 30px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 24px; font-weight: 700;\">📈 Your Growth Roadmap</h1>\n            </div>\n            \n            <div style=\"background: white; padding: 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 16px; color: #2c3e50; margin: 0 0 20px 0;\">Hi {data['first_name']},</p>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    I've analyzed {data['company']}'s {data['industry']} niche and created a custom growth strategy.\n                </p>\n                \n                <div style=\"background: #f8f5ff; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #6c5ce7;\">\n                    <h3 style=\"color: #2c3e50; margin: 0 0 15px 0; font-size: 18px;\">Your 90-Day Action Plan:</h3>\n                    <div style=\"color: #34495e; font-size: 15px; line-height: 1.8;\">\n                        <strong>Phase 1 (Days 1-30):</strong> Foundation & Setup<br>\n                        <strong>Phase 2 (Days 31-60):</strong> Scale & Optimize<br>\n                        <strong>Phase 3 (Days 61-90):</strong> Automate & Expand\n                    </div>\n                </div>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 20px 0;\">\n                    Ready to see the detailed roadmap?\n                </p>\n                \n                <div style=\"text-align: center; margin: 25px 0;\">\n                    <a href=\"https://calendly.com/hunter-agency\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);\n                        color: white;\n                        padding: 14px 28px;\n                        text-decoration: none;\n                        border-radius: 6px;\n                        font-weight: 600;\n                        font-size: 15px;\n                    \">🗓️ Schedule Strategy Review</a>\n                </div>\n                \n                <p style=\"font-size: 14px; color: #7f8c8d; margin: 25px 0 0 0;\">\n                    To your success,<br><strong>Hunter Agency Team</strong>\n                </p>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n    \n    def _hot_lead_immediate(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour les leads hot (contact immédiat)\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%); padding: 30px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 26px; font-weight: 700;\">🔥 URGENT: {data['first_name']}</h1>\n                <p style=\"color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 16px;\">High-Priority Opportunity Alert</p>\n            </div>\n            \n            <div style=\"background: white; padding: 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 16px; color: #2c3e50; margin: 0 0 20px 0;\">\n                    Hi {data['first_name']},\n                </p>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    Your profile shows <strong>{data['company']}</strong> is perfectly positioned for explosive growth in the {data['industry']} space.\n                </p>\n                \n                <div style=\"background: #fff2e6; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ff6b6b;\">\n                    <p style=\"color: #2c3e50; margin: 0 0 15px 0; font-weight: 600; font-size: 16px;\">⚡ Limited Time Opportunity:</p>\n                    <p style=\"color: #34495e; margin: 0; line-height: 1.6;\">\n                        I have <strong>ONE slot left</strong> this week for a strategy session. \n                        Given {data['company']}'s potential, I want to offer it to you first.\n                    </p>\n                </div>\n                \n                <p style=\"font-size: 15px; color: #34495e; line-height: 1.6; margin: 20px 0;\">\n                    In 30 minutes, I'll show you exactly how to:\n                </p>\n                \n                <div style=\"background: #f0fff4; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #00b894;\">\n                    <div style=\"color: #2c3e50; line-height: 1.8;\">\n                        {data['industry_specific_benefits']}\n                    </div>\n                </div>\n                \n                <div style=\"text-align: center; margin: 30px 0;\">\n                    <a href=\"https://calendly.com/hunter-agency/urgent\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);\n                        color: white;\n                        padding: 18px 36px;\n                        text-decoration: none;\n                        border-radius: 8px;\n                        font-weight: 700;\n                        font-size: 17px;\n                        box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);\n                        animation: pulse 2s infinite;\n                    \">🚀 CLAIM YOUR SLOT NOW</a>\n                </div>\n                \n                <p style=\"font-size: 14px; color: #e74c3c; text-align: center; margin: 20px 0;\">\n                    ⏰ Only available for 24 hours\n                </p>\n                \n                <p style=\"font-size: 14px; color: #7f8c8d; margin: 25px 0 0 0;\">\n                    Don't let this opportunity pass,<br>\n                    <strong>Hunter Agency VIP Team</strong>\n                </p>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n    \n    def _follow_up_gentle(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour follow-up doux\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%); padding: 25px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 22px; font-weight: 600;\">👋 Checking In</h1>\n            </div>\n            \n            <div style=\"background: white; padding: 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 15px; color: #2c3e50; margin: 0 0 20px 0;\">Hi {data['first_name']},</p>\n                \n                <p style=\"font-size: 14px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    Just wanted to check in on {data['company']}'s growth goals.\n                </p>\n                \n                <p style=\"font-size: 14px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    How are things going with your {data['industry']} initiatives?\n                </p>\n                \n                <p style=\"font-size: 14px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    If you ever want to chat about growth strategies, I'm here to help.\n                </p>\n                \n                <div style=\"text-align: center; margin: 25px 0;\">\n                    <a href=\"https://calendly.com/hunter-agency\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);\n                        color: white;\n                        padding: 12px 24px;\n                        text-decoration: none;\n                        border-radius: 6px;\n                        font-weight: 600;\n                        font-size: 14px;\n                    \">📞 Quick Chat</a>\n                </div>\n                \n                <p style=\"font-size: 13px; color: #7f8c8d; margin: 25px 0 0 0;\">\n                    Cheers,<br><strong>Hunter Agency Team</strong>\n                </p>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n    \n    def _follow_up_value(self, data: Dict[str, Any]) -> str:\n        \"\"\"Template pour follow-up avec valeur\"\"\"\n        return f\"\"\"\n        <html>\n        <body style=\"font-family: 'Segoe UI', Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #f8f9fa;\">\n            <div style=\"background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%); padding: 30px; text-align: center; border-radius: 12px 12px 0 0;\">\n                <h1 style=\"color: white; margin: 0; font-size: 24px; font-weight: 700;\">🎁 Free Resource</h1>\n                <p style=\"color: rgba(255,255,255,0.9); margin: 10px 0 0 0; font-size: 16px;\">Exclusive {data['industry']} Growth Guide</p>\n            </div>\n            \n            <div style=\"background: white; padding: 30px; border-radius: 0 0 12px 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);\">\n                <p style=\"font-size: 15px; color: #2c3e50; margin: 0 0 20px 0;\">Hi {data['first_name']},</p>\n                \n                <p style=\"font-size: 14px; color: #34495e; line-height: 1.6; margin: 0 0 20px 0;\">\n                    I put together something special for {data['industry']} leaders like yourself.\n                </p>\n                \n                <div style=\"background: #fff0f6; padding: 25px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #fd79a8;\">\n                    <h3 style=\"color: #2c3e50; margin: 0 0 15px 0; font-size: 18px;\">🚀 \"{data['industry'].title()} Growth Playbook 2024\"</h3>\n                    <p style=\"color: #34495e; margin: 0; line-height: 1.6; font-size: 14px;\">\n                        • Proven strategies from 50+ {data['industry']} companies<br>\n                        • Step-by-step implementation guide<br>\n                        • Templates and checklists included<br>\n                        • Worth $497, yours free\n                    </p>\n                </div>\n                \n                <p style=\"font-size: 14px; color: #34495e; line-height: 1.6; margin: 20px 0;\">\n                    No strings attached. Just good content to help {data['company']} grow.\n                </p>\n                \n                <div style=\"text-align: center; margin: 25px 0;\">\n                    <a href=\"https://hunter-agency.com/playbook\" style=\"\n                        display: inline-block;\n                        background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);\n                        color: white;\n                        padding: 14px 28px;\n                        text-decoration: none;\n                        border-radius: 6px;\n                        font-weight: 600;\n                        font-size: 15px;\n                    \">📖 Download Free Guide</a>\n                </div>\n                \n                <p style=\"font-size: 13px; color: #7f8c8d; margin: 25px 0 0 0;\">\n                    Hope it helps!<br><strong>Hunter Agency Team</strong>\n                </p>\n            </div>\n        </body>\n        </html>\n        \"\"\"\n\n# Instance globale pour l'utilisation\nemail_engine = EmailTemplateEngine()\n\ndef get_email_template(template_name: str, lead_data: dict) -> dict:\n    \"\"\"Fonction helper pour récupérer un template\"\"\"\n    return email_engine.get_template(template_name, lead_data)\n