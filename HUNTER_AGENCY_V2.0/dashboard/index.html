<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hunter Agency - OnlyFans Analytics</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --gold: #D4AF37;
            --gold-light: #F4E4BC;
            --gold-dark: #B8941F;
            --bg: #0f0f0f;
            --bg-card: #1a1a1a;
            --bg-hover: #262626;
            --text: #ffffff;
            --text-dim: #9ca3af;
            --border: #333333;
            --success: #10b981;
            --danger: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg);
            color: var(--text);
            font-size: 14px;
        }

        .container {
            display: grid;
            grid-template-areas: "sidebar content";
            grid-template-columns: 260px 1fr;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            grid-area: sidebar;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            padding: 20px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0 20px;
            margin-bottom: 30px;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
            background: var(--gold);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #000;
            font-weight: 700;
        }

        .logo h1 {
            font-size: 16px;
            font-weight: 700;
        }

        .logo .subtitle {
            font-size: 11px;
            color: var(--gold);
        }

        .nav {
            padding: 0 12px;
        }

        .nav-item {
            margin-bottom: 2px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            color: var(--text-dim);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.1s ease;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--gold);
            color: #000;
        }

        .nav-link .badge {
            background: var(--gold);
            color: #000;
            font-size: 9px;
            padding: 2px 5px;
            border-radius: 8px;
            margin-left: auto;
            font-weight: 700;
        }

        /* Content */
        .content {
            grid-area: content;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .header h2 {
            font-size: 22px;
            font-weight: 700;
        }

        .header .subtitle {
            color: var(--gold);
            font-size: 13px;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 6px 12px;
            border: 1px solid var(--border);
            background: var(--bg-card);
            color: var(--text);
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.1s ease;
        }

        .btn:hover {
            border-color: var(--gold);
        }

        .btn-primary {
            background: var(--gold);
            border-color: var(--gold);
            color: #000;
            font-weight: 600;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--gold);
            font-size: 11px;
            font-weight: 600;
        }

        .status-dot {
            width: 4px;
            height: 4px;
            background: var(--gold);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Stats Grid */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.1s ease;
            position: relative;
            overflow: hidden;
        }

        .stat::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gold);
            transform: scaleX(0);
            transition: transform 0.1s ease;
        }

        .stat:hover::before {
            transform: scaleX(1);
        }

        .stat:hover {
            transform: translateY(-2px);
            border-color: var(--gold);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            background: var(--gold);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #000;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 6px;
        }

        .stat-label {
            color: var(--text-dim);
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 11px;
            font-weight: 600;
        }

        .positive { color: var(--success); }
        .negative { color: var(--danger); }

        /* Charts */
        .charts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 24px;
        }

        .chart {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            flex-shrink: 0;
        }

        .chart-title {
            font-size: 14px;
            font-weight: 600;
        }

        .chart-controls {
            display: flex;
            gap: 2px;
            background: var(--bg-hover);
            border-radius: 4px;
            padding: 2px;
        }

        .control-btn {
            padding: 4px 8px;
            background: transparent;
            border: none;
            border-radius: 2px;
            color: var(--text-dim);
            font-size: 10px;
            font-weight: 600;
            cursor: pointer;
        }

        .control-btn.active,
        .control-btn:hover {
            background: var(--gold);
            color: #000;
        }

        .chart-container {
            flex: 1;
            position: relative;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chart-container canvas {
            max-width: 100% !important;
            max-height: 100% !important;
        }

        /* Table */
        .table-wrap {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .table th {
            background: var(--bg-hover);
            font-weight: 600;
            color: var(--gold);
            font-size: 11px;
            text-transform: uppercase;
        }

        .table tr:hover {
            background: var(--bg-hover);
        }

        /* Sections */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .sections {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg);
            z-index: 999;
        }

        .sections.show {
            display: block;
        }

        /* Notification */
        .notif {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-card);
            border: 2px solid var(--gold);
            border-radius: 8px;
            padding: 16px;
            max-width: 300px;
            transform: translateX(400px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notif.show {
            transform: translateX(0);
            opacity: 1;
        }

        .notif-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
        }

        .notif-icon {
            width: 24px;
            height: 24px;
            background: var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #000;
        }

        .notif-title {
            font-weight: 600;
            font-size: 13px;
        }

        .notif-text {
            color: var(--text-dim);
            font-size: 12px;
        }

        /* Loading */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-radius: 50%;
            border-top-color: var(--gold);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Mobile */
        @media (max-width: 768px) {
            .container {
                grid-template-areas: "content";
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .charts {
                grid-template-columns: 1fr;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Notification -->
    <div id="notif" class="notif">
        <div class="notif-header">
            <div class="notif-icon">💰</div>
            <div class="notif-title" id="notifTitle">Title</div>
        </div>
        <div class="notif-text" id="notifText">Message</div>
    </div>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">🦁</div>
                <div>
                    <h1>HUNTER AGENCY</h1>
                    <div class="subtitle">OnlyFans Empire</div>
                </div>
            </div>

            <nav class="nav">
                <div class="nav-item">
                    <div class="nav-link active" onclick="showSection('overview', this)">
                        <span>📊</span>
                        Overview
                    </div>
                </div>
                <div class="nav-item">
                    <div class="nav-link" onclick="showSection('creators', this)">
                        <span>👑</span>
                        Creators
                        <span class="badge" id="creatorsCount">24</span>
                    </div>
                </div>
                <div class="nav-item">
                    <div class="nav-link" onclick="showSection('campaigns', this)">
                        <span>🚀</span>
                        Campaigns
                        <span class="badge" id="campaignsCount">12</span>
                    </div>
                </div>
                <div class="nav-item">
                    <div class="nav-link" onclick="showSection('analytics', this)">
                        <span>📈</span>
                        Analytics
                    </div>
                </div>
                <div class="nav-item">
                    <div class="nav-link" onclick="showSection('settings', this)">
                        <span>⚙️</span>
                        Settings
                    </div>
                </div>
            </nav>
        </aside>

        <!-- Content -->
        <main class="content">
            <div class="header">
                <div>
                    <h2 id="pageTitle">Dashboard Overview</h2>
                    <div class="subtitle">Real-time OnlyFans analytics</div>
                </div>
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div class="status">
                        <div class="status-dot"></div>
                        <span id="status">Live</span>
                    </div>
                    <div class="header-actions">
                        <button class="btn" onclick="refresh()">🔄</button>
                        <button class="btn" onclick="exportData()">⬇️</button>
                        <button class="btn btn-primary" onclick="notify('⚙️ Settings', 'Config panel ready')">⚙️</button>
                    </div>
                </div>
            </div>

            <!-- OVERVIEW -->
            <section id="overview" class="section active">
                <div class="stats">
                    <div class="stat" onclick="details('revenue')">
                        <div class="stat-header">
                            <div class="stat-icon">💰</div>
                            <div style="font-size: 20px;">📈</div>
                        </div>
                        <div class="stat-value" id="revenue">$247K</div>
                        <div class="stat-label">Total Revenue</div>
                        <div class="stat-change positive">↗️ +32% vs last month</div>
                    </div>

                    <div class="stat" onclick="details('ai')">
                        <div class="stat-header">
                            <div class="stat-icon">🤖</div>
                            <div style="font-size: 20px;">🔥</div>
                        </div>
                        <div class="stat-value" id="aiRate">89.2%</div>
                        <div class="stat-label">AI Conversion</div>
                        <div class="stat-change positive">↗️ +12% vs last week</div>
                    </div>

                    <div class="stat" onclick="details('dms')">
                        <div class="stat-header">
                            <div class="stat-icon">💬</div>
                            <div style="font-size: 20px;">📨</div>
                        </div>
                        <div class="stat-value" id="dms">8,426</div>
                        <div class="stat-label">DMs Today</div>
                        <div class="stat-change positive">↗️ +156 vs yesterday</div>
                    </div>

                    <div class="stat" onclick="details('creators')">
                        <div class="stat-header">
                            <div class="stat-icon">👥</div>
                            <div style="font-size: 20px;">👑</div>
                        </div>
                        <div class="stat-value" id="creators">24</div>
                        <div class="stat-label">Active Creators</div>
                        <div class="stat-change positive">↗️ +3 new this week</div>
                    </div>
                </div>

                <div class="charts">
                    <div class="chart">
                        <div class="chart-header">
                            <h3 class="chart-title">💰 Revenue Trends</h3>
                            <div class="chart-controls">
                                <button class="control-btn active">7D</button>
                                <button class="control-btn">30D</button>
                                <button class="control-btn">90D</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>

                    <div class="chart">
                        <div class="chart-header">
                            <h3 class="chart-title">🎯 Platform Split</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="platformChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="table-wrap">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Creator</th>
                                <th>Revenue</th>
                                <th>Subs</th>
                                <th>Growth</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="creatorsTable">
                            <tr>
                                <td><strong>Sarah Moon</strong></td>
                                <td>$47.8K</td>
                                <td>2,847</td>
                                <td><span class="positive">+18.5%</span></td>
                                <td><span class="positive">Active</span></td>
                            </tr>
                            <tr>
                                <td><strong>Emma Vega</strong></td>
                                <td>$39.2K</td>
                                <td>2,156</td>
                                <td><span class="positive">+24.3%</span></td>
                                <td><span class="positive">Active</span></td>
                            </tr>
                            <tr>
                                <td><strong>Luna Rose</strong></td>
                                <td>$34.5K</td>
                                <td>1,923</td>
                                <td><span class="positive">+15.7%</span></td>
                                <td><span class="positive">Active</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Other sections -->
            <section id="creators" class="section">
                <h2>👑 Creator Management</h2>
                <p style="color: var(--text-dim); margin: 16px 0;">Manage your creator portfolio</p>
                <div style="text-align: center; padding: 40px; color: var(--text-dim);">
                    <div style="font-size: 48px; margin-bottom: 16px;">👑</div>
                    <h3>Creator data loading...</h3>
                </div>
            </section>

            <section id="campaigns" class="section">
                <h2>🚀 Marketing Campaigns</h2>
                <p style="color: var(--text-dim); margin: 16px 0;">Track campaign performance</p>
                <div style="text-align: center; padding: 40px; color: var(--text-dim);">
                    <div style="font-size: 48px; margin-bottom: 16px;">🚀</div>
                    <h3>Campaign data loading...</h3>
                </div>
            </section>

            <section id="analytics" class="section">
                <h2>📈 Advanced Analytics</h2>
                <p style="color: var(--text-dim); margin: 16px 0;">Deep insights and metrics</p>
                <div style="text-align: center; padding: 40px; color: var(--text-dim);">
                    <div style="font-size: 48px; margin-bottom: 16px;">📈</div>
                    <h3>Analytics loading...</h3>
                </div>
            </section>

            <section id="settings" class="section">
                <h2>⚙️ Settings</h2>
                <p style="color: var(--text-dim); margin: 16px 0;">Configure dashboard</p>
                <div class="chart">
                    <div class="chart-header">
                        <h3 class="chart-title">🔧 General Settings</h3>
                    </div>
                    <div style="padding: 16px 0;">
                        <div style="margin-bottom: 16px;">
                            <label style="display: block; margin-bottom: 6px; font-weight: 600;">Refresh Rate</label>
                            <select style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 4px; background: var(--bg); color: var(--text); font-size: 12px;">
                                <option value="30" selected>30 seconds</option>
                                <option value="60">1 minute</option>
                                <option value="300">5 minutes</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="notify('💾 Saved', 'Settings updated')">💾 Save</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script>
        const API_BASE = 'http://localhost:8000';
        let charts = {};
        let isConnected = false;

        // 🔔 Notification System
        function notify(title, text) {
            const n = document.getElementById('notif');
            document.getElementById('notifTitle').textContent = title;
            document.getElementById('notifText').textContent = text;
            n.classList.add('show');
            setTimeout(() => n.classList.remove('show'), 3000);
        }

        // 📊 Load Real Data from API
        async function loadData() {
            try {
                document.getElementById('status').textContent = 'Loading...';
                
                // Fetch stats from your API
                const statsRes = await fetch(`${API_BASE}/api/stats`);
                if (!statsRes.ok) throw new Error('API not responding');
                
                const stats = await statsRes.json();
                
                // Update KPIs with real data
                document.getElementById('revenue').textContent = `${Math.floor(stats.totalRevenue/1000)}K`;
                document.getElementById('aiRate').textContent = `${stats.aiConversion}%`;
                document.getElementById('dms').textContent = stats.dmsToday.toLocaleString();
                document.getElementById('creators').textContent = stats.activeCreators;
                
                document.getElementById('revenueChange').textContent = `↗️ ${stats.revenueChange}`;
                document.getElementById('aiChange').textContent = `↗️ ${stats.aiChange}`;
                document.getElementById('dmsChange').textContent = `↗️ ${stats.dmsChange}`;
                document.getElementById('creatorsChange').textContent = `↗️ ${stats.creatorsChange}`;
                
                // Update connection status
                document.getElementById('status').textContent = 'Live';
                isConnected = true;
                
                // Load charts
                await createCharts();
                
                if (!isConnected) {
                    notify('🦁 Connected!', 'Dashboard synced with Hunter Agency API');
                    isConnected = true;
                }
                
            } catch (error) {
                console.error('API Error:', error);
                document.getElementById('status').textContent = 'Offline';
                document.getElementById('status').style.color = 'var(--danger)';
                
                // Fallback to mock data
                loadFallbackData();
                notify('⚠️ API Offline', 'Using cached data. Check your API server.');
            }
        }

        // 🔄 Fallback Data (when API is down)
        function loadFallbackData() {
            document.getElementById('revenue').textContent = '$247K';
            document.getElementById('aiRate').textContent = '89.2%';
            document.getElementById('dms').textContent = '8,426';
            document.getElementById('creators').textContent = '24';
            
            document.getElementById('revenueChange').textContent = '↗️ +32.4%';
            document.getElementById('aiChange').textContent = '↗️ +12.7%';
            document.getElementById('dmsChange').textContent = '↗️ +156';
            document.getElementById('creatorsChange').textContent = '↗️ +3';
        }

        // 📈 Create Charts with Real API Data
        async function createCharts() {
            try {
                // Fetch charts data from API
                const chartsRes = await fetch(`${API_BASE}/api/charts`);
                if (!chartsRes.ok) throw new Error('Charts API not responding');
                
                const chartsData = await chartsRes.json();
                
                // Revenue Chart
                const ctx1 = document.getElementById('revenueChart');
                if (!ctx1) return;
                
                if (charts.revenue) {
                    charts.revenue.destroy();
                }
                
                const gradient = ctx1.getContext('2d').createLinearGradient(0, 0, 0, 200);
                gradient.addColorStop(0, 'rgba(212, 175, 55, 0.3)');
                gradient.addColorStop(1, 'rgba(212, 175, 55, 0.05)');
                
                charts.revenue = new Chart(ctx1, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Revenue ($K)',
                            data: chartsData.revenueChart,
                            borderColor: '#D4AF37',
                            backgroundColor: gradient,
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#D4AF37',
                            pointBorderColor: '#ffffff',
                            pointBorderWidth: 2,
                            pointRadius: 4,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                labels: {
                                    color: '#ffffff',
                                    font: { size: 12, weight: '600' }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: {
                                    color: '#9ca3af',
                                    font: { size: 11 }
                                }
                            },
                            x: {
                                grid: { color: 'rgba(255, 255, 255, 0.1)' },
                                ticks: {
                                    color: '#9ca3af',
                                    font: { size: 11 }
                                }
                            }
                        }
                    }
                });

                // Platform Chart
                const ctx2 = document.getElementById('platformChart');
                if (!ctx2) return;
                
                if (charts.platform) {
                    charts.platform.destroy();
                }
                
                charts.platform = new Chart(ctx2, {
                    type: 'doughnut',
                    data: {
                        labels: ['OnlyFans', 'Fansly', 'ManyVids', 'Others'],
                        datasets: [{
                            data: chartsData.platformChart,
                            backgroundColor: ['#D4AF37', '#F4E4BC', '#B8941F', '#10b981'],
                            borderWidth: 3,
                            borderColor: '#1a1a1a'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#ffffff',
                                    font: { size: 11, weight: '600' },
                                    padding: 15,
                                    usePointStyle: true
                                }
                            }
                        }
                    }
                });
                
            } catch (error) {
                console.error('Charts Error:', error);
                // Create fallback charts with mock data
                createFallbackCharts();
            }
        }

        // 📊 Fallback Charts (when API is down)
        function createFallbackCharts() {
            const mockData = {
                revenueChart: [28.5, 35.2, 42.1, 38.7, 45.3, 52.8, 47.2],
                platformChart: [65, 20, 10, 5]
            };
            
            // Use mock data for charts
            const ctx1 = document.getElementById('revenueChart');
            if (charts.revenue) charts.revenue.destroy();
            
            charts.revenue = new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        data: mockData.revenueChart,
                        borderColor: '#D4AF37',
                        backgroundColor: 'rgba(212, 175, 55, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: '#9ca3af' } },
                        x: { grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: '#9ca3af' } }
                    }
                }
            });
        }

        // 🔄 Refresh Data
        function refresh() {
            notify('🔄 Refreshing', 'Fetching latest data from API...');
            loadData();
        }

        // 📊 KPI Details
        function details(type) {
            const messages = {
                revenue: 'Real-time revenue data from Hunter Agency API. Updates every 30 seconds.',
                ai: 'AI conversion rates powered by your automation system. Industry leading performance.',
                dms: 'Daily DM count from your messaging automation. Response rates optimized.',
                creators: 'Active creator count managed by your agency. Portfolio growing strong.'
            };
            notify(`📊 ${type.toUpperCase()}`, messages[type]);
        }

        // 💾 Export Data
        function exportData() {
            const exportData = {
                timestamp: new Date().toISOString(),
                source: 'Hunter Agency API',
                apiEndpoint: API_BASE,
                connected: isConnected,
                note: 'Real-time export from live dashboard'
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `hunter-agency-live-export-${Date.now()}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            notify('⬇️ Export Complete', 'Live data exported successfully!');
        }

        // 🚀 Auto-refresh every 30 seconds
        function startAutoRefresh() {
            setInterval(() => {
                if (isConnected) {
                    loadData();
                }
            }, 30000);
        }

        // 🎯 Initialize Dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🦁 Hunter Agency Dashboard - Connecting to API...');
            
            // Initial connection message
            document.getElementById('status').textContent = 'Connecting...';
            
            // Load data from API
            setTimeout(() => {
                loadData();
            }, 500);
            
            // Start auto-refresh
            startAutoRefresh();
            
            // Welcome message
            setTimeout(() => {
                if (isConnected) {
                    notify('🦁 Hunter Agency Live!', 'Connected to your API. Real-time data active!');
                } else {
                    notify('📊 Dashboard Ready', 'API connection failed, using fallback data.');
                }
            }, 2000);
            
            console.log('✅ Dashboard initialized with API connection!');
        });

        // 🧹 Cleanup
        window.addEventListener('beforeunload', function() {
            Object.values(charts).forEach(chart => {
                if (chart) chart.destroy();
            });
        });
    </script>
</body>
</html>